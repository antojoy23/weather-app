(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{216:function(e,t,a){},217:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(65),c=a.n(i),o=(a(73),a(29)),s=a(30),l=a(33),u=a(31),h=a(32),d=a(11),m=a(4),p=a.n(m),y=(a(74),function(e){return void 0===e.city?null:r.a.createElement("div",{className:"summary-block wsection"},r.a.createElement("div",{className:"tdc-block"},r.a.createElement("p",null,e.city.name,", ",e.city.country),r.a.createElement("p",null,e.currentDay,", ",e.weather.time),r.a.createElement("p",{className:"weather-description"},e.weather.weather_description)),r.a.createElement("div",{className:"temp-details-block"},r.a.createElement("div",{className:"temp-block"},r.a.createElement("img",{alt:e.weather.weather_description,src:"assets/images/"+e.weather.weather_icon+".png"}),r.a.createElement("p",null,e.weather.temp,"\xb0 C")),r.a.createElement("div",{className:"details-block"},r.a.createElement("p",null,"Percipitation: ",e.weather.percipitation,"%"),r.a.createElement("p",null,"Humidity: ",e.weather.humidity,"%"),r.a.createElement("p",null,"Wind: ",e.weather.wind," km/h"))))}),w=a(66);var g=function(e){var t=e.data.currentDay,a=[],n=[],i=0;p.a.each(e.data.weatherDetails[t],function(e,t){var r=t.time.split(" ");a.push(t.temp),n.push(r[0].substr(0,2)+" "+r[1]),i=t.temp>i?t.temp:i});var c=function(e,t){return{labels:t,datasets:[{data:e,fill:!0,backgroundColor:"#f0f8ff",borderColor:"#a4d4ff",pointBorderColor:"#dd6200"}]}}(a,n),o={legend:{display:!1},scales:{xAxes:[{gridLines:{display:!1}}],yAxes:[{ticks:{display:!1,suggestedMax:i+10,beginAtZero:!0},gridLines:{drawBorder:!1,display:!1}}]}};return r.a.createElement("div",{className:"wsection"},r.a.createElement(w.a,{data:c,height:75,options:o,onElementsClick:function(t){return e.onGraphClick(t)}}))},b=function(e){var t="",a=e.weatherId.substring(0,3);return"true"===e.isactive&&(t=" active"),r.a.createElement("div",{onClick:function(){return e.onDayChange(e.weatherId)},className:"icon-block icon-block-"+e.weatherId+t},r.a.createElement("p",null,a),r.a.createElement("img",{alt:e.weather.weather_description,src:"assets/images/"+e.weather.weather_icon+".png"}),r.a.createElement("div",{className:"min-max-temp"},r.a.createElement("p",null,e.weather.max_temp,"\xb0 ",e.weather.min_temp,"\xb0")))},f=function(e){var t,a=[];return p.a.each(e.data.weatherDetails,function(n,i){var c;void 0===t?(t=!0,c=r.a.createElement(b,{key:n,weatherId:n,onDayChange:e.onDayChange,weather:i[0],isactive:"true"})):c=r.a.createElement(b,{key:n,onDayChange:e.onDayChange,weatherId:n,weather:i[0]}),a.push(c)}),r.a.createElement("div",{className:"footer-weather-icon-block wsection"},a)},v="https://api.openweathermap.org/",k=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={},a.handleGraphClick=function(e){if(e.length>0){var t=e[0]._index;a.setState({currentWeather:a.state.weatherDetails[a.state.currentDay][t]})}},a.handleApiSubmit=function(){""!==p()(".api-key-input").val()&&(a.setState({api_key:escape(p()(".api-key-input").val())}),a.getGeoLocation())},a.handleDayChange=function(e){var t=a.state.weatherDetails[e][0];p()(".icon-block").removeClass("active"),p()(".icon-block-"+e).addClass("active"),a.setState({currentWeather:t,currentDay:e})},a.getGeoLocation=function(){navigator.geolocation?navigator.geolocation.getCurrentPosition(a.getPosition,a.handleGeoError):alert("Geolocation is not supported by this browser.")},a.getPosition=function(e){a.getWeatherForecast(e.coords.latitude,e.coords.longitude)},a.handleGeoError=function(e){switch(e.code){case e.PERMISSION_DENIED:alert("User denied the request for Geolocation.");break;case e.POSITION_UNAVAILABLE:alert("Location information is unavailable.");break;case e.TIMEOUT:alert("The request to get user location timed out.");break;default:alert("An unknown error occurred.")}},a.getWeatherForecast=function(e,t){var n=Object(d.a)(Object(d.a)(a));p.a.getJSON("".concat(v,"data/2.5/forecast?lat=").concat(e,"&lon=").concat(t,"&appid=").concat(a.state.api_key)).then(function(e){return n.processResponse(e)})},a.processResponse=function(e){if("200"===e.cod){var t,n=Object(d.a)(Object(d.a)(a)),r={name:e.city.name,country:e.city.country},i={};p.a.each(e.list,function(e,a){var r=n.getDay(a.dt);void 0===t&&(t=r),i.hasOwnProperty(r)||(i[r]=[]);var c={time:n.getTime(a.dt_txt),min_temp:Math.round(a.main.temp_min-273.15),max_temp:Math.round(a.main.temp_max-273.15),temp:Math.round(a.main.temp-273.15),humidity:a.main.humidity,wind:Math.round(3.6*a.wind.speed),weather_icon:n.getIconName(a.weather[0].icon),weather_description:a.weather[0].description,percipitation:a.clouds.all};i[r].push(c)}),a.setState({city:r,weatherDetails:i,currentWeather:i[t][0],currentDay:t})}},a.getIconName=function(e){var t="";switch(e.substr(0,2)){case"01":t="sunny";break;case"02":t="partly-sunny";break;case"09":case"10":t="rain";break;case"11":t="thunderstorm";break;case"13":t="snow";break;case"50":t="mist";break;default:t="cloud"}return"n"===e.slice(-1)&&("sunny"===t&&(t="night"),"partly-sunny"===t&&(t="night-cloud")),t},a.getDay=function(e){var t=(new Date).getTimezoneOffset();return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(1e3*(e+=60*t)).getDay()]},a.getTime=function(e){var t=e.split(" ")[1].substr(0,5),a=parseInt(t.substr(0,2)),n=a>12?a-12:a,r=parseInt(t.substr(0,2))>=12?"pm":"am";return n<10?"0"+n+t.substr(2)+" "+r+" UTC":n+t.substr(2)+" "+r+" UTC"},a}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return void 0===this.state.api_key||""===this.state.api_key?r.a.createElement("div",{className:"api-key-block"},r.a.createElement("h2",null,"Weather Forecast"),r.a.createElement("p",null,"This app uses the"," ",r.a.createElement("a",{href:"https://openweathermap.org",rel:"noopener noreferrer",target:"_blank"},"OpenWeatherMap")," ","API to show 5 day/ 3 hour weather forecast."),r.a.createElement("input",{className:"api-key-input",type:"text",placeholder:"Enter your API Key here"}),r.a.createElement("input",{type:"submit",onClick:this.handleApiSubmit})):void 0===this.state.city?r.a.createElement("div",{className:"loader-block"},r.a.createElement("div",{className:"loader"})):r.a.createElement("div",{className:"main-container"},r.a.createElement(y,{city:this.state.city,weather:this.state.currentWeather,currentDay:this.state.currentDay}),r.a.createElement(g,{data:this.state,onGraphClick:this.handleGraphClick}),r.a.createElement(f,{data:this.state,onDayChange:this.handleDayChange}))}},{key:"componentDidMount",value:function(){void 0!==this.state.api_key&&this.getGeoLocation()}}]),t}(n.Component),E=(a(216),function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return r.a.createElement(k,null)}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(E,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},68:function(e,t,a){e.exports=a(217)},73:function(e,t,a){},74:function(e,t,a){}},[[68,1,2]]]);
//# sourceMappingURL=main.e41706cf.chunk.js.map